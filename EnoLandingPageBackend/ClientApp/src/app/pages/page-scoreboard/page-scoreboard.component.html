<div id="scoreboard-title">
  <div class="chevrons">
    <button mat-icon-button [disabled]="round === 0">
      <mat-icon (click)="gotoFirstRound()">first_page</mat-icon>
    </button>
    <button mat-icon-button [disabled]="round === 0">
      <mat-icon (click)="gotoPreviousRound()">chevron_left</mat-icon>
    </button>
  </div>
  <div class="middle">
    <h2>Round {{ round }}</h2>
    <div *ngIf="isCurrentRound">
      (Next round in <countdown #cd [config]="countDownConfig"></countdown>)
    </div>
  </div>
  <div class="chevrons">
    <button mat-icon-button [disabled]="isCurrentRound">
      <mat-icon (click)="gotoNextRound()">chevron_right</mat-icon>
    </button>
    <button mat-icon-button [disabled]="isCurrentRound">
      <mat-icon (click)="gotoCurrentRound()">last_page</mat-icon>
    </button>
  </div>
</div>

<div style="flex: 1 1 100%; display: flex; min-height: 0px; height: 100%">
  <pbl-ngrid
    class="pbl-ngrid-cell-ellipsis pbl-ngrid-header-cell-ellipsis"
    style="height: 100%; width: 100%; max-width: 100%"
    [dataSource]="ds"
    [columns]="columns"
    vScrollFixed
    maxBufferPx="200"
    minBufferPx="50"
    showHeader
    columnReorder
    blockUi
    matSort
    cellTooltip
  >
    <div *pblNgridBlockUiDef class="pbl-ngrid-ui-block">
      Loading
      <!-- <mat-progress-bar mode="indeterminate"></mat-progress-bar> -->
    </div>

    <div
      *pblNgridHeaderCellTypeDef="'service'; col as col"
      class="pbl-ngrid-no-data"
    >
      {{ col.label }}
      <div>Flagstores: {{ col.data.flagVariants }}</div>
    </div>

    <div *pblNgridNoDataRef class="pbl-ngrid-no-data">
      <span>Seems like no round could be loaded.</span>
    </div>

    <div *pblNgridCellDef="'team'; value as team" class="team-cell">
      <div class="teamId">
        {{ team.teamId }}
      </div>
      <img
        *ngIf="team.logoUrl"
        class="team-logo"
        [src]="team.logoUrl"
        referrerpolicy="no-referrer"
      />
      <div class="texts">
        <div class="team-name">
          {{ team.teamName }} <br />
          (10.0.0.{{ team.teamId }})
        </div>
        <app-country-flag
          *ngIf="team.countryCode"
          [isoCountryCode]="team.countryCode"
        ></app-country-flag>
      </div>
      <div class="score">{{ team.totalScore.toFixed(0) }} Points</div>
    </div>

    <div
      *pblNgridCellTypeDef="'service'; value as service; row as row; col as col"
      [ngridCellClass]="service.serviceStatus"
      (click)="openInfo(row, service, col.data)"
    >
      <div class="sla">
        <div class="div1">âš”</div>
        <div class="div2">
          {{ service.serviceLevelAgreementScore.toFixed(0) }}
        </div>
        <div class="div3">
          (
          {{ +0 }}
          )
        </div>
        <div class="div4">ðŸ›¡</div>
        <div class="div5">
          {{ service.attackScore.toFixed(0) }}
        </div>
        <div class="div6">
          (
          {{ -0 }}
          )
        </div>
        <div class="div7">â›¨</div>
        <div class="div8">
          {{ service.defenseScore.toFixed(0) }}
        </div>
        <div class="div9">
          (
          {{ +0 }}
          )
        </div>
      </div>
    </div>
  </pbl-ngrid>
</div>
