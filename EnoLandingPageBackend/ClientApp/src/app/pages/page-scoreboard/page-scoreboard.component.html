<div id="scoreboard-title">
  <div>
    <button mat-icon-button>
      <mat-icon>first_page</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>chevron_left</mat-icon>
    </button>
  </div>
  <h2>Round {{ round }}</h2>
  <div>
    <button mat-icon-button>
      <mat-icon>chevron_right</mat-icon>
    </button>
    <button mat-icon-button>
      <mat-icon>last_page</mat-icon>
    </button>
  </div>
</div>

<div class="scoreboard-table">
  <ng-container *ngIf="teams != null">
    <table mat-table [dataSource]="teams" [trackBy]="trackById">
      <!-- matSort
      matSortDirection="asc"
      matSortActive="teamName" -->

      <ng-container matColumnDef="teamId" sticky>
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let row">
          {{ row.teamId }}
        </td>
      </ng-container>
      <ng-container matColumnDef="teamName" sticky>
        <th mat-header-cell *matHeaderCellDef>Team</th>
        <td mat-cell *matCellDef="let row">
          <div class="team-cell">
            <app-team-logo [logoUrl]="row.logoUrl"></app-team-logo>
            <div class="team-name">
              {{ row.teamName }} (10.0.0.{{ row.teamId }})
            </div>
            <app-country-flag
              *ngIf="row.countryCode"
              [isoCountryCode]="row.countryCode"
            ></app-country-flag>
          </div>
        </td>
      </ng-container>

      <ng-container
        *ngFor="let service of services; let colIndex = index"
        matColumnDef="service-{{ service.serviceId }}"
      >
        <th mat-header-cell *matHeaderCellDef>
          <div>
            {{ service.serviceName }}
            <div>
              <!-- TODO: Better data stucture??? -->
              Flagstores: {{ service.flagVariants }}
            </div>
          </div>
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          class="service-cell {{
            element.serviceDetails[colIndex].serviceStatus
          }}"
          [matTooltip]="element.serviceDetails[colIndex].serviceStatus"
        >
          <!-- TODO: Make more performant by using a custom whitespace padded string instead of html elements -->
          <div class="sla">
            <div class="div1">âš”</div>
            <div class="div2">
              {{
                element.serviceDetails[
                  colIndex
                ].serviceLevelAgreementScore.toFixed(0)
              }}
            </div>
            <div class="div3">
              (
              {{ +0 }}
              )
            </div>
            <div class="div4">ðŸ›¡</div>
            <div class="div5">
              {{ element.serviceDetails[colIndex].attackScore.toFixed(0) }}
            </div>
            <div class="div6">
              (
              {{ -0 }}
              )
            </div>
            <div class="div7">â›¨</div>
            <div class="div8">
              {{ element.serviceDetails[colIndex].defenseScore.toFixed(0) }}
            </div>
            <div class="div9">
              (
              {{ +0 }}
              )
            </div>
          </div>
          <!-- <div class="status">
            {{ element.serviceDetails[colIndex].serviceStatus }}
          </div> -->
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </ng-container>
</div>
